{
  "resourceType": "StructureDefinition",
  "id": "zib-AddressInformation",
  "text": {
    "status": "empty",
    "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">No narrative is provided for definitional resources. A human-readable rendering can be found in the implementation guide(s) where this resource is used.</div>"
  },
  "url": "http://nictiz.nl/fhir/StructureDefinition/zib-AddressInformation",
  "version": "0.0.1",
  "name": "ZibAddressInformation",
  "title": "zib AddressInformation",
  "status": "draft",
  "publisher": "Nictiz",
  "contact": [
    {
      "name": "Nictiz",
      "telecom": [
        {
          "system": "url",
          "value": "https://www.nictiz.nl",
          "use": "work"
        }
      ]
    }
  ],
  "description": "Address information includes data where a person resides (temporarily, permanently) or where a building is located.",
  "purpose": "This Address datatype represents the Dutch [zib ('Zorginformatiebouwsteen', i.e. Health and Care Information Model) AddressInformation v1.1 (2020)](https://zibs.nl/wiki/AddressInformation-v1.1(2020EN)).",
  "copyright": "Copyright and related rights waived via CC0, https://creativecommons.org/publicdomain/zero/1.0/. This does not apply to information from third parties, for example a medical terminology system. The implementer alone is responsible for identifying and obtaining any necessary licenses or authorizations to utilize third party IP in connection with the specification or otherwise.",
  "fhirVersion": "4.0.1",
  "mapping": [
    {
      "identity": "zib-addressinformation-v1.1-2020EN",
      "uri": "https://zibs.nl/wiki/AddressInformation-v1.1(2020EN)",
      "name": "zib AddressInformation-v1.1(2020EN)"
    }
  ],
  "kind": "complex-type",
  "abstract": true,
  "type": "Address",
  "baseDefinition": "http://hl7.org/fhir/StructureDefinition/Address",
  "derivation": "constraint",
  "differential": {
    "element": [
      {
        "id": "Address",
        "path": "Address",
        "short": "AddressInformation",
        "comment": "This datatype defines a common basis for expressing all addresses around the world, but adds extensions to express Dutch addresses specifically, according to the [zib AddressInformation v1.1 (2020)](https://zibs.nl/wiki/AddressInformation-v1.1(2020EN)). A Dutch Address still is a proper FHIR Address, which means that systems that cannot interpret the extensions will still be able to render and work with this datatype.\r\n\r\nTo have true compatibility an implementer SHOULD use the core Address parts as intended. To have addresses work for Dutch context, the implementer SHOULD in addition use the extension elements.\r\n\r\n**Separate address parts**\r\n\r\nThe first addition is that Dutch addresses make certain address parts separately communicable. These parts are required for use in true Dutch systems when dealing with Dutch addresses, but may not have value for international systems when information gets sent abroad.\r\n\r\n**Custom address types**\r\n\r\nThe second addition is that the zib defines its own ValueSet for address types, which can only be partially expressed using the FHIR Address datatype and requires a mapping to multiple elements. The table below explains how the zib concepts are mapped to the various FHIR elements (see the ConceptMaps <http://nictiz.nl/fhir/ConceptMap/AdresSoortCodelijst-to-AddressUse> and <http://nictiz.nl/fhir/ConceptMap/AdresSoortCodelijst-to-AddressType> as well). The code from the zib should also be included using the extension on `Address.extension:addressType`.\r\n\r\n| zib                               | .ext:addressType | .use | .type    |\r\n|-----------------------------------|------------------|------|----------|\r\n| Postal Address/Postadres          | PST              |      | postal   |\r\n| Primary Home/Officieel adres      | HP               | home | both     |\r\n| Visit Address/Woon-/verblijfadres | PHYS             | home | physical |\r\n| Temporary Address/Tijdelijk adres | TMP              | temp |          |\r\n| Work Place/Werkadres              | WP               | work |          |\r\n| Vacation Home/Vakantie adres      | HV               | temp |          |\r\n\r\nIf `Address.type` is _both_ then this is to be understood as a dual purpose address (postal and physical), unless a specific _postal_ type address is added. Systems that support importing it like this are encouraged to do so, otherwise they may need to import this as two separate addresses.\r\n\r\nNote: FHIR core defines the AD-use extension to further specify the postal address type. However, the ValueSet used in that extension doesn't completely match the zib ValueSet. Therefore, a custom extension has been made. This doesn't preclude the use of the AD-use extension.",
        "alias": [
          "Adresgegevens"
        ],
        "mapping": [
          {
            "identity": "zib-addressinformation-v1.1-2020EN",
            "map": "NL-CM:20.5.1",
            "comment": "AddressInformation"
          }
        ]
      },
      {
        "id": "Address.extension:addressType",
        "path": "Address.extension",
        "sliceName": "addressType",
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "http://nictiz.nl/fhir/StructureDefinition/ext-AddressInformation.AddressType"
            ]
          }
        ]
      },
      {
        "id": "Address.use",
        "path": "Address.use",
        "short": "AddressType",
        "definition": "The type of address in question, such as a home address or mailing address.",
        "alias": [
          "AdresSoort"
        ],
        "binding": {
          "strength": "required",
          "description": "Use ConceptMap AdresSoortCodelijst-to-AddressUse to translate terminology from the functional model to profile terminology in ValueSet AddressUse.",
          "valueSet": "http://hl7.org/fhir/ValueSet/address-use|4.0.1",
          "_valueSet": {
            "extension": [
              {
                "url": "http://hl7.org/fhir/StructureDefinition/11179-permitted-value-conceptmap",
                "valueCanonical": "http://nictiz.nl/fhir/ConceptMap/AdresSoortCodelijst-to-AddressUse"
              }
            ]
          }
        },
        "mapping": [
          {
            "identity": "zib-addressinformation-v1.1-2020EN",
            "map": "NL-CM:20.5.8",
            "comment": "AddressType"
          }
        ]
      },
      {
        "id": "Address.type",
        "path": "Address.type",
        "short": "AddressType",
        "definition": "The type of address in question, such as a home address or mailing address.",
        "alias": [
          "AdresSoort"
        ],
        "binding": {
          "strength": "required",
          "description": "Use ConceptMap AdresSoortCodelijst-to-AddressType to translate terminology from the functional model to profile terminology in ValueSet AddressType.",
          "valueSet": "http://hl7.org/fhir/ValueSet/address-type|4.0.1",
          "_valueSet": {
            "extension": [
              {
                "url": "http://hl7.org/fhir/StructureDefinition/11179-permitted-value-conceptmap",
                "valueCanonical": "http://nictiz.nl/fhir/ConceptMap/AdresSoortCodelijst-to-AddressType"
              }
            ]
          }
        },
        "mapping": [
          {
            "identity": "zib-addressinformation-v1.1-2020EN",
            "map": "NL-CM:20.5.8",
            "comment": "AddressType"
          }
        ]
      },
      {
        "id": "Address.line",
        "path": "Address.line",
        "comment": "The mapping of zib AddressInformation on the FHIR Address datatype is the result of compatibility with HL7v3, which is the format that a lot of healthcare data in the Netherlands is stored in.\r\n\r\nThe elements of Address stored in the address-part extensions will be ignored by applications that do not support them, so any information in them should also be duplicated in the `Address.line` to which they are attached. The value of `Address.line` should be populated with a complete string representation of all the separate extension values, like: \"[Street] [HouseNumberIndication] [HouseNumber] [HouseNumberLetter] [HouseNumberAddition]\"."
      },
      {
        "id": "Address.line.extension:streetName",
        "path": "Address.line.extension",
        "sliceName": "streetName",
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "http://hl7.org/fhir/StructureDefinition/iso21090-ADXP-streetName"
            ]
          }
        ]
      },
      {
        "id": "Address.line.extension:streetName.value[x]",
        "path": "Address.line.extension.value[x]",
        "short": "Street",
        "definition": "Street name of the address.",
        "alias": [
          "Straat"
        ],
        "mapping": [
          {
            "identity": "zib-addressinformation-v1.1-2020EN",
            "map": "NL-CM:20.5.2",
            "comment": "Street"
          }
        ]
      },
      {
        "id": "Address.line.extension:houseNumber",
        "path": "Address.line.extension",
        "sliceName": "houseNumber",
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "http://hl7.org/fhir/StructureDefinition/iso21090-ADXP-houseNumber"
            ]
          }
        ]
      },
      {
        "id": "Address.line.extension:houseNumber.value[x]",
        "path": "Address.line.extension.value[x]",
        "short": "HouseNumber",
        "definition": "House number of the address.",
        "alias": [
          "Huisnummer"
        ],
        "mapping": [
          {
            "identity": "zib-addressinformation-v1.1-2020EN",
            "map": "NL-CM:20.5.12",
            "comment": "HouseNumber"
          }
        ]
      },
      {
        "id": "Address.line.extension:houseNumberLetter-houseNumberAddition",
        "path": "Address.line.extension",
        "sliceName": "houseNumberLetter-houseNumberAddition",
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "http://hl7.org/fhir/StructureDefinition/iso21090-ADXP-buildingNumberSuffix"
            ]
          }
        ]
      },
      {
        "id": "Address.line.extension:houseNumberLetter-houseNumberAddition.value[x]",
        "path": "Address.line.extension.value[x]",
        "short": "HouseNumberLetter / HouseNumberAddition",
        "definition": "Export:\r\n\r\n- If a HouseNumberLetter as well as a HouseNumberAddition is known: HouseNumberLetter first, followed by a space and finally the HouseNumberAddition.\r\n- If only a HouseNumberLetter is known, send just that. No trailing space is required.\r\n- If only a HouseNumberAddition is known, communicate that with a leading space.\r\n\r\nImport\r\n\r\n- If the value of buildingNumberSuffix contains no space, then the whole value is considered to be the HouseNumberLetter.\r\n- If the value of buildingNumberSuffix contains a space, then everything before the first space is considered to be the HouseNumberLetter, and the everything trailing the first space is considered to be the HouseNumberAddition.\r\n\r\nNote: While a leading space is allowed in string values in FHIR, the parsing of such space cannot be guaranteed in XML representations. Although aware of this issue, this mapping is not changed because of compatibility reasons. If an implementer cannot parse a leading space, the practical risk of mapping a HouseNumberIndication to a HouseNumberAddition is deemed insignificant.",
        "alias": [
          "Huisnummerletter",
          "Huisnummertoevoeging"
        ],
        "mapping": [
          {
            "identity": "zib-addressinformation-v1.1-2020EN",
            "map": "NL-CM:20.5.11",
            "comment": "HouseNumberLetter"
          },
          {
            "identity": "zib-addressinformation-v1.1-2020EN",
            "map": "NL-CM:20.5.10",
            "comment": "HouseNumberAddition"
          }
        ]
      },
      {
        "id": "Address.line.extension:houseNumberIndication",
        "path": "Address.line.extension",
        "sliceName": "houseNumberIndication",
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "http://hl7.org/fhir/StructureDefinition/iso21090-ADXP-additionalLocator"
            ]
          }
        ]
      },
      {
        "id": "Address.line.extension:houseNumberIndication.value[x]",
        "path": "Address.line.extension.value[x]",
        "short": "HouseNumberIndication",
        "definition": "The indication used for addresses which do not consist of the usual street name and house number.",
        "comment": "The mapping of zib AddressInformation on the FHIR Address datatype is the result of compatibility with HL7v3, which is the format that a lot of healthcare data in the Netherlands is stored in. As a result of this, the coded zib HouseNumberIndication concept (CD datatype) is mapped to a FHIR string datatype with a constraint added (the value can only be 'by' or 'to').",
        "alias": [
          "AanduidingBijNummer"
        ],
        "constraint": [
          {
            "key": "houseNumberIndication",
            "severity": "error",
            "human": "Must have value 'by' or 'to'",
            "expression": "$this in ('by' | 'to')"
          }
        ],
        "mapping": [
          {
            "identity": "zib-addressinformation-v1.1-2020EN",
            "map": "NL-CM:20.5.9",
            "comment": "HouseNumberIndication"
          }
        ]
      },
      {
        "id": "Address.line.extension:additionalInformation",
        "path": "Address.line.extension",
        "sliceName": "additionalInformation",
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "http://hl7.org/fhir/StructureDefinition/iso21090-ADXP-unitID"
            ]
          }
        ]
      },
      {
        "id": "Address.line.extension:additionalInformation.value[x]",
        "path": "Address.line.extension.value[x]",
        "short": "AdditionalInformation",
        "definition": "Extra information such as the building name, building number, entrance, route number.",
        "alias": [
          "AdditioneleInformatie"
        ],
        "mapping": [
          {
            "identity": "zib-addressinformation-v1.1-2020EN",
            "map": "NL-CM:20.5.7",
            "comment": "AdditionalInformation"
          }
        ]
      },
      {
        "id": "Address.city",
        "path": "Address.city",
        "short": "PlaceOfResidence",
        "definition": "A geographically determined area which forms part of the municipal area. For Dutch places of residence, preferably use the name from the GBA, table 33 (OID: 2.16.840.1.113883.2.4.6.14).",
        "alias": [
          "Woonplaats"
        ],
        "mapping": [
          {
            "identity": "zib-addressinformation-v1.1-2020EN",
            "map": "NL-CM:20.5.3",
            "comment": "PlaceOfResidence"
          }
        ]
      },
      {
        "id": "Address.district",
        "path": "Address.district",
        "short": "Municipality",
        "definition": "Municipality of residence. For Dutch municipalities, preferably use the name from the GBA, table 33 (OID: 2.16.840.1.113883.2.4.6.14).",
        "alias": [
          "Gemeente"
        ],
        "mapping": [
          {
            "identity": "zib-addressinformation-v1.1-2020EN",
            "map": "NL-CM:20.5.4",
            "comment": "Municipality"
          }
        ]
      },
      {
        "id": "Address.postalCode",
        "path": "Address.postalCode",
        "short": "Postcode",
        "definition": "Postcode of the address. In Dutch addresses, preferably use the postcode from the Postcode table (OID: 2.16.840.1.113883.2.4.4.15).",
        "alias": [
          "Postcode"
        ],
        "mapping": [
          {
            "identity": "zib-addressinformation-v1.1-2020EN",
            "map": "NL-CM:20.5.6",
            "comment": "Postcode"
          }
        ]
      },
      {
        "id": "Address.country",
        "path": "Address.country",
        "comment": "The FHIR datatype does not properly support coding the country using a CodeableConcept or Coding datatype. If the sender supports coded countries, it SHALL send the coded value using the ext-CodeSpecification extension under `Address.country.extension:countryCode`."
      },
      {
        "id": "Address.country.extension:countryCode",
        "path": "Address.country.extension",
        "sliceName": "countryCode",
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "http://nictiz.nl/fhir/StructureDefinition/ext-CodeSpecification"
            ]
          }
        ]
      },
      {
        "id": "Address.country.extension:countryCode.value[x]",
        "path": "Address.country.extension.value[x]",
        "short": "Country",
        "definition": "Country in which the address is located.",
        "alias": [
          "Land"
        ],
        "binding": {
          "strength": "required",
          "valueSet": "http://decor.nictiz.nl/fhir/ValueSet/2.16.840.1.113883.2.4.3.11.60.121.11.10--20200901000000"
        },
        "mapping": [
          {
            "identity": "zib-addressinformation-v1.1-2020EN",
            "map": "NL-CM:20.5.5",
            "comment": "Country"
          }
        ]
      }
    ]
  }
}